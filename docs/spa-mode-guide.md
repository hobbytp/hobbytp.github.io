# Hugo SPA模式使用指南

## 🎯 概述

SPA（单页应用）模式为你的Hugo博客提供了现代化的用户体验，包括固定侧边栏、卡片式布局和无刷新页面切换。

## ✨ 主要特性

### 🎨 视觉设计

- **固定左侧导航栏** - 始终可见的网站导航
- **卡片式文章展示** - 美观的文章预览卡片
- **悬停动画效果** - 流畅的交互反馈
- **响应式设计** - 完美适配各种设备

### 🚀 功能特性

- **无刷新切换** - AJAX加载内容，体验更流畅
- **智能搜索** - 实时搜索和筛选功能
- **文章目录** - 文章页面右侧显示目录导航
- **分享功能** - 一键分享到社交媒体
- **暗色模式** - 自动适配系统主题

## 🛠️ 使用方法

### 启用SPA模式

```bash
# 启用SPA模式
./scripts/toggle-spa-mode.sh enable

# 重启Hugo服务器
docker-compose restart hugo
```

### 禁用SPA模式

```bash
# 恢复传统模式
./scripts/toggle-spa-mode.sh disable

# 重启Hugo服务器
docker-compose restart hugo
```

### 查看当前模式

```bash
# 查看当前模式状态
./scripts/toggle-spa-mode.sh status
```

## 📱 界面布局

### 首页和分类页

```
┌─────────────────────────────────────┐
│ 左侧导航(固定) │ 右侧内容区域        │
│                │ ┌─────────────────┐ │
│ • 首页         │ │ 搜索栏          │ │
│ • 技术文章     │ │ ┌─────┐┌─────┐  │ │
│ • 项目展示     │ │ │卡片1││卡片2│  │ │
│ • 论文解读     │ │ └─────┘└─────┘  │ │
│ • 人物洞察     │ │ ┌─────┐┌─────┐  │ │
│                │ │ │卡片3││卡片4│  │ │
│                │ │ └─────┘└─────┘  │ │
└─────────────────────────────────────┘
```

### 文章页面

```
┌─────────────────────────────────────┐
│ 左侧导航(固定) │ 文章内容 │ 右侧目录 │
│                │          │         │
│ • 首页         │ 文章标题  │ 目录    │
│ • 技术文章     │ 文章内容  │ 文章信息│
│ • 项目展示     │ 分享按钮  │ 标签    │
│ • 论文解读     │ 相关推荐  │         │
│ • 人物洞察     │          │         │
└─────────────────────────────────────┘
```

## 🎮 交互功能

### 导航操作

- **点击左侧导航** - 切换到对应分类，显示卡片列表
- **点击文章卡片** - 加载文章内容，右侧显示目录
- **悬停卡片** - 卡片浮起动画效果

### 搜索和筛选

- **实时搜索** - 输入关键词即时筛选文章
- **排序选项** - 按日期、标题排序
- **标签筛选** - 点击标签快速筛选

### 文章阅读

- **目录导航** - 点击目录快速跳转到对应章节
- **分享功能** - 一键分享到微博、微信等平台
- **相关推荐** - 自动推荐相关文章

## 📱 响应式设计

### 桌面端 (>1024px)

- 固定左侧导航栏 (256px宽度)
- 三列卡片网格布局
- 文章页面双栏布局

### 平板端 (768px-1024px)

- 可折叠左侧导航栏
- 两列卡片网格布局
- 文章页面单栏布局

### 移动端 (<768px)

- 隐藏左侧导航栏
- 单列卡片布局
- 全屏文章阅读

## 🔧 自定义配置

### 修改导航菜单

编辑 `layouts/_default/baseof-spa.html` 中的导航部分：

```html
<li>
    <a href="/your-section/" class="nav-item ..." data-section="your_section">
        <svg class="w-5 h-5 mr-3">...</svg>
        你的分类
    </a>
</li>
```

### 自定义卡片样式

编辑 `layouts/_default/list-spa.html` 中的卡片结构：

```html
<article class="blog-card ...">
    <!-- 自定义卡片内容 -->
</article>
```

### 调整颜色主题

编辑 `assets/css/custom.css` 中的颜色变量：

```css
:root {
    --primary-color: #667eea;
    --secondary-color: #764ba2;
    --accent-color: #4a9eff;
}
```

## 🚨 注意事项

### SEO考虑

- SPA模式对SEO不如传统模式友好
- 建议在需要SEO的页面使用传统模式
- 可以通过服务端渲染(SSR)改善SEO

### 性能优化

- 内容会被缓存，减少重复加载
- 图片懒加载提升页面性能
- 建议定期清理缓存

### 浏览器兼容性

- 需要现代浏览器支持ES6+
- 不支持JavaScript时自动回退到传统模式
- 建议在移动端测试兼容性

## 🐛 故障排除

### 常见问题

**Q: 左侧导航栏不显示**
A: 检查CSS文件是否正确加载，确保 `custom.css` 包含SPA样式

**Q: 卡片点击无响应**
A: 检查JavaScript是否正确加载，查看浏览器控制台错误

**Q: 搜索功能不工作**
A: 确保文章有正确的 `data-title` 和 `data-tags` 属性

**Q: 移动端显示异常**
A: 检查响应式CSS规则，确保媒体查询正确

### 调试模式

在浏览器控制台中运行以下代码查看调试信息：

```javascript
// 查看当前SPA状态
console.log('SPA Mode:', window.BlogSPA ? 'Enabled' : 'Disabled');

// 查看缓存内容
console.log('Cache:', window.BlogSPA?.cache);

// 手动触发导航
window.BlogSPA?.navigateToSection('home');
```

## 📈 性能监控

### 关键指标

- **首次内容绘制 (FCP)** - 目标 < 1.5s
- **最大内容绘制 (LCP)** - 目标 < 2.5s
- **首次输入延迟 (FID)** - 目标 < 100ms
- **累积布局偏移 (CLS)** - 目标 < 0.1

### 优化建议

1. **图片优化** - 使用WebP格式，添加懒加载
2. **代码分割** - 按需加载JavaScript模块
3. **缓存策略** - 合理设置HTTP缓存头
4. **CDN加速** - 使用CDN分发静态资源

## 🔄 版本更新

### 更新SPA模式

```bash
# 备份当前配置
cp -r layouts/_default layouts/_default.backup

# 更新SPA文件
# 替换新的 baseof-spa.html, list-spa.html, single-spa.html

# 重启服务
docker-compose restart hugo
```

### 回滚到旧版本

```bash
# 恢复备份
cp -r layouts/_default.backup layouts/_default

# 重启服务
docker-compose restart hugo
```

---

## 📞 技术支持

如果遇到问题，请：

1. 查看浏览器控制台错误信息
2. 检查Hugo服务器日志
3. 确认所有文件权限正确
4. 尝试清除浏览器缓存

更多技术细节请参考Hugo官方文档和Tailwind CSS文档。
