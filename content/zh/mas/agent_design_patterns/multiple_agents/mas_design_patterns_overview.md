---
title: 多智能体设计模式概述
date: "2025-11-01T10:10:00+08:00"
draft: true
tags: ["AI", "多智能体", "设计模式", "design pattern", "agentic"]
categories: ["mas"]
description: "多智能体设计模式概述: 智能体设计模式（Agentic Design Patterns）为构建自主系统提供了结构化和可预测的蓝图。在多智能体系统（Multi-Agent System, MAS）领域，设计模式的核心在于定义**多个独立或半独立智能体**如何感知、推理、行动和交互，共同完成复杂目标。"
---




**多智能体设计模式总览索引**

本页梳理了多智能体系统（MAS）中常见的设计模式分类及其主要特征。实际每一种模式的详细原理与案例，可参阅下列文档：

- **[多智能体协作设计模式详解](multiagent_coop_design_pattern.md)**  
  介绍多智能体协作（Multi-Agent Collaboration）、流行协作架构、典型案例、框架支持及组合策略。
- **[群组对话与辩论模式](multiagent_debate_design_pattern.md)**
- **[装配线与角色分工模式](multiagent_assemblyline_roles_design_pattern.md)**
- **[并行化与聚合模式](multiagent_parallel_mapreduce_design_pattern.md)**
- 记忆相关的模式，包括记忆增强智能体、记忆检索、记忆更新等。Context Engineering(必然ACE， 基于文件系统管理上下文（manus， claude skills )
- 使用工具相关的模式。(Tool Use Pattern，mcp)
- **[异常处理与恢复模式](multiagent_error_recovery_design_pattern.md)**

> **提示**：如需了解基础单智能体模式（如ReAct、规划、反思等），请参考“单智能体设计模式”相关章节。

本页下方将从**功能目标**、**交互关系**等多个维度，总结各类模式的核心机制与典型场景，方便快速定位和对比。

---

## 维度一：根据功能目标分类 (Functional & Purpose-Based)

这种分类侧重于模式在智能体系统中所扮演的核心角色或其主要解决的问题类型。

### 1. 核心智能体逻辑模式（Core Agent Logic Patterns）

这些模式构成了单个智能体行为的基础，但通常是多智能体系统中的基本构件或子流程。
这些模式在单智能体设计模式部分已经详细解释了，这里只提供一个总结表格。

| 模式名称 | 核心机制描述 | 典型应用 | 来源 |
| :--- | :--- | :--- | :--- |
| **推理与行动 (ReAct / TAO)** | 将思考（Thought）、行动（Action）和观察（Observation）结构化为显式的迭代循环。智能体在推理和工具调用之间交替进行，动态调整计划。 | 复杂、不可预测任务的默认起点；需要收集证据的研究和调试。 | |
| **规划 (Planning)** | 智能体在执行前，将复杂任务分解为结构化、有序的步骤序列或“路线图”，并按逻辑顺序排列操作。 | 模糊、开放式问题；项目管理和流程自动化。 | |
| **反思与批判 (Reflection / Critique)** | 智能体对自身的输出或内部状态进行评估，并利用评估结果来迭代优化响应，实现自我纠错。通常采用**生产者-批评者**模型。 | 高质量内容生成；代码生成与调试；确保最终输出符合严格约束。 | |
| **思维树 (Tree of Thoughts, ToT)** | 将推理过程从线性链条（CoT）扩展为树状结构，同时生成和评估多个不同的“思想”或下一步行动方案。 | 战略规划；复杂决策；需要系统性探索和纠错的问题。 | |

### 2. 工作流编排与控制模式（Workflow Orchestration & Control Patterns）

这些模式定义了任务在智能体或智能体子系统之间如何流转和控制。

| 模式名称 | 核心机制描述 | 典型应用 | 来源 |
| :--- | :--- | :--- | :--- |
| **提示链 (Prompt Chaining)** | 将复杂任务分解为一系列线性的、预定义的子任务，前一个提示的输出直接作为后一个提示的输入，形成确定性的处理管道。 | 文档问答；内容转换流水线；结构化数据提取。 | |
| **路由 (Routing)** | 引入动态条件分支，使智能体（路由器）根据用户输入或当前状态，智能地将任务分派给最合适的下游路径、工具或子流程。 | 智能客服分流；成本与性能优化；多工具选择。 | |
| **并行化 (Parallelization)** | 同时执行多个彼此无依赖的子任务或LLM调用，大幅缩短整体执行时间。 | 信息收集与调研（同时搜索多个来源）；多API或工具交互。 | |
| **优先级排序 (Prioritization)** | 智能体根据任务的紧急性、重要性、依赖关系和既定标准进行评估和排序，集中处理最关键的任务。 | 自动化客户支持；云计算资源调度；项目管理。 | |

### 3. 多智能体协作模式（Multi-Agent Collaboration Patterns）

这些模式明确了多个专职智能体如何协同工作，解决单一智能体无法完成的复杂问题。

| 模式名称 | 核心机制描述 | 典型应用 | 来源 |
| :--- | :--- | :--- | :--- |
| **协调器与层级分解** | 顶层“协调器”（Manager）智能体将复杂目标分解为子任务，并动态委托给下一层专职子智能体执行或进行进一步分解。 | 需要大量规划和分层管理的复杂问题；软件开发（如 MetaGPT 的装配线范式）。 | |
| **群组对话与辩论** | 多个智能体共享一个消息线程，通过互相批评、辩论或协商达成共识，由管理器协调发言顺序。 | 需要多角度验证结论的复杂决策制定；头脑风暴；提升事实准确性。 | |
| **装配线范式** | 一种特殊的顺序协作，智能体按固定顺序依次执行任务，确保阶段隔离和中间结果验证，常用于专业流程。 | 软件开发流程（需求分析 → 系统设计 → 代码实现 → 测试验证）。 | |
| **角色与职责模式** | 每个智能体拥有明确的角色、描述和系统提示，定义其专业领域，实现专业化分工。 | 任何需要多个专家角色协同的任务，如金融分析师、技术写手、QA工程师等。 | |

### 4. 高级与支撑性模式（Advanced & Supporting Patterns）

这些模式提供了增强智能体能力的关键机制，使其能够与外部世界连接、保障可靠性或自我优化。

| 模式名称 | 核心机制描述 | 典型应用 | 来源 |
| :--- | :--- | :--- | :--- |
| **知识检索 (RAG)** | 从外部知识库中检索相关信息，并将其作为上下文注入到 LLM 的提示中，以增强输出的准确性和实时性。 | 企业搜索；客户支持；法律文档检索。 | |
| **工具使用 (Tool Use)** | 通过函数调用机制，使智能体能够与外部 API、数据库或执行代码交互，突破 LLM 静态知识和行动局限。 | 实时数据查询；发送邮件；工作流自动化。 | |
| **人类参与环节 (HITL)** | 在智能体工作流的关键节点插入人类审批或反馈，确保在伦理、安全或高风险决策上的准确性。 | 财务审批；敏感数据处理；内容审核中的边界情况裁决。 | |
| **异常处理与恢复** | 结构化地管理错误（如工具失败、超时），包括检测、重试、备用方案和自我修正，确保系统稳健性。 | 生产环境中的高可靠性要求；SRE 自动化。 | |
| **自适应协调** | 使用 LLM 智能选择下一发言者，而非固定规则，根据当前对话状态和智能体描述判断最适合的响应者。 | 灵活的多智能体对话流；动态任务分配。 | |

---

## 维度二：根据架构拓扑结构分类 (Architectural Topology)

这种分类侧重于智能体之间的数据流和控制流是如何物理或逻辑连接的。

| 模式名称 | 结构描述 | 关键特征 | 来源 |
| :--- | :--- | :--- | :--- |
| **层级/监督者架构 (Hierarchical/Supervisor)** | 包含顶层监督者（Supervisor）智能体，它接收任务，并动态委派给底层的工作者智能体（Worker Agent）。 | 结构清晰、易于管理；适合复杂问题的分层管理和分布式决策。 | |
| **网络架构/群组聊天 (Network/Group Chat)** | 所有智能体都可以与其他所有智能体通信（多对多连接），没有明确的层级结构，智能体决定下一步调用哪个智能体。 | 适用于去中心化、需要弹性交流的问题；通过对话式协作流模拟团队解决问题。 | |
| **图结构 (Graph Structure / DAG)** | 工作流被建模为有状态的图结构（如 LangGraph），节点为智能体或函数，边为条件逻辑，显式管理控制流和数据流。 | 提供了最高级别的流程控制和可观察性；支持复杂的循环（如 ReAct、Reflection）和条件路由。 | |
| **顺序工作流 (Sequential Workflow)** | 智能体或任务按固定顺序依次执行，前者的输出作为后者的输入。 | 直观、低延迟（对于固定流程）；缺乏处理动态输入时的灵活性。 | |
| **并行聚合 (Parallel/Aggregate)** | 将大任务拆分为独立块，多个智能体并行处理，最后由聚合器合并结果。 | 高可扩展性、显著减少总延迟；适用于大规模数据分析和文档摘要。也叫Map-Reducer模式 | |

---

## 维度三：根据智能体间通信与协议分类 (Communication & Protocol)

这种分类侧重于智能体如何交换信息、发现彼此的能力，以及如何进行系统级集成。

| 模式名称 | 核心机制描述 | 典型应用 | 来源 |
| :--- | :--- | :--- | :--- |
| **智能体间通信协议 (A2A)** | 一项开放标准，旨在为智能体之间的**互操作性**提供通用标准，使不同框架（如 ADK、LangGraph、CrewAI）的智能体能协同工作。 | 跨平台的多智能体集成；构建可发现、可订阅的智能体服务市场。 | |
| **模型上下文协议 (MCP)** | 为 AI 模型与外部工具、数据源和环境之间的交互提供通用中间层和开放标准，用于 LLM 发现和调用外部能力。 | 数据库集成；生成式媒体编排；外部 API 交互的标准化接口。 | |
| **消息传递与事件驱动** | 智能体通过**发布-订阅 (Pub-Sub)** 机制通信，支持异步处理。消息到达时触发相应处理程序。 | 异步工作流；MetaGPT 的松耦合通信；大规模智能体模拟。 | |
| **自设计 MAS (SELF-MAS)** | 一种元模式，元智能体在**推理时**迭代评估和完善 MAS 设计（包括分解和协调逻辑），以适应每个问题，无需依赖验证集。 | 需要动态适应每个问题独特结构的复杂任务（如数学、代码）。 | |

---

这种多维分类方法有助于开发者根据任务的复杂性、对质量或速度的要求、以及可用的技术栈（如 LangGraph 的图结构 或 CrewAI 的角色编排能力），来选择和组合最合适的智能体设计模式。
