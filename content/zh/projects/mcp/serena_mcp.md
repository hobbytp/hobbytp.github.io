---
title: æ¯å‘¨ä¸€ä¸ªMCPï¼šSerena MCP
date: "2025-10-21T15:03:00+08:00"
tags: ["mcp", "serena", "coding"]
categories: ["projects"]
draft: false
description: Serena MCP æ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§ä¸”å¼€æºçš„ç¼–ç ä»£ç†å·¥å…·åŒ…ï¼Œæ—¨åœ¨å°†å¤§å‹è¯­è¨€æ¨¡å‹ï¼ˆLLMsï¼‰è½¬åŒ–ä¸ºå…·å¤‡å®Œæ•´åŠŸèƒ½çš„æ™ºèƒ½ä»£ç åŠ©æ‰‹ï¼Œä¸“æ³¨äºè¯­ä¹‰ä»£ç æ£€ç´¢å’Œç¼–è¾‘ï¼Œæ¨¡æ‹Ÿé›†æˆå¼€å‘ç¯å¢ƒï¼ˆIDEï¼‰çš„èƒ½åŠ›ã€‚
---

## èƒŒæ™¯

æƒ³è±¡ä¸€ä¸‹ï¼Œä½ æœ‰ä¸€ä½æ‰åæ¨ªæº¢çš„AIç¼–ç¨‹åŠ©æ‰‹ï¼Œä½†å®ƒåƒä¸ªâ€œä»£ç ç›²äººâ€ï¼šä½ åªèƒ½æŠŠä»£ç ç‰‡æ®µä¸€æ®µæ®µåœ°å¤åˆ¶åˆ°èŠå¤©æ¡†é‡Œï¼Œå®ƒæ— æ³•æ„ŸçŸ¥é¡¹ç›®çš„å…¨è²Œï¼Œä¸çŸ¥é“å‡½æ•°ä¹‹é—´çš„è°ƒç”¨å…³ç³»ï¼Œä¿®æ”¹ä»£ç å°±åƒåœ¨é»‘æš—ä¸­æ‘¸ç´¢ã€‚è¿™æ­£æ˜¯å½“å‰å¤§å¤šæ•°AIç¼–ç¨‹å·¥å…·çš„ç°çŠ¶ã€‚

è€Œ â€‹Serena MCPâ€‹ çš„å‡ºç°ï¼Œå½»åº•ç»ˆç»“äº†è¿™ä¸ªæ—¶ä»£ã€‚å®ƒä¸æ˜¯ä¸€ä¸ªå•ç‹¬çš„AIæ¨¡å‹ï¼Œè€Œæ˜¯ä¸€ä¸ªè¶…çº§å·¥å…·åŒ…ï¼Œä¸ºä½ å·²æœ‰çš„AIï¼ˆæ— è®ºæ˜¯ Claudeã€GPT è¿˜æ˜¯æœ¬åœ°æ¨¡å‹ï¼‰è£…ä¸Šäº†ä¸€ä¸ªâ€œIDEå¤§è„‘â€ï¼Œè®©å®ƒä»â€œæ–‡æœ¬ç”Ÿæˆå™¨â€èœ•å˜ä¸ºçœŸæ­£çš„â€œè½¯ä»¶å·¥ç¨‹å¸ˆâ€ã€‚ä¸ä¼ ç»Ÿç¼–ç å·¥å…·ä¸åŒï¼ŒSerena å®Œå…¨ä¸ä¾èµ–ç‰¹å®šæ¡†æ¶ï¼Œé€šè¿‡æä¾› **è¯­ä¹‰ä»£ç æ£€ç´¢å’Œç¼–è¾‘å·¥å…·** å¼¥åˆäº† LLM ä¸ä¸“ä¸šå¼€å‘ç¯å¢ƒä¹‹é—´çš„é¸¿æ²Ÿï¼Œå¹¶æä¾›äº†ç±»ä¼¼ IDE çš„è¯­ä¹‰ä»£ç ç†è§£å’Œæ“ä½œèƒ½åŠ›ï¼Œå¯åœ¨ç¬¦å·çº§åˆ«è¿è¡Œã€‚æ— éœ€ä¾èµ–è¯»å–æ•´ä¸ªæ–‡ä»¶ã€æ‰§è¡Œ grep æœç´¢æˆ–è¿›è¡Œå­—ç¬¦ä¸²æ›¿æ¢ç­‰ç²—ç³™çš„æ–‡ä»¶çº§æ“ä½œï¼ŒSerena èƒ½å¤Ÿå®ç°ç²¾ç¡®çš„ç¬¦å·çº§æ“ä½œï¼Œæ˜¾è‘—æå‡æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚

## **1ã€æ ¸å¿ƒå¥‡è¿¹ï¼šä»â€œæ–‡æœ¬ç†è§£â€åˆ°â€œç¬¦å·ç†è§£â€çš„é™ç»´æ‰“å‡»**

æ™®é€šAIå·¥å…·çœ‹å¾…ä»£ç å°±åƒæˆ‘ä»¬çœ‹ä¸€ç¯‡æ–‡ç« ï¼Œåªèƒ½è¿›è¡Œæ–‡å­—åŒ¹é…ã€‚è€ŒSerenaçš„æ ¸å¿ƒåœ¨äºåˆ©ç”¨äº† **è¯­è¨€æœåŠ¡å™¨åè®®ï¼ˆLSPï¼‰**â€”â€”è¿™æ­£æ˜¯ VS Codeã€IntelliJ ç­‰ç°ä»£IDEèƒ½å¤Ÿæ™ºèƒ½è·³è½¬å®šä¹‰ã€æŸ¥æ‰¾å¼•ç”¨çš„åº•å±‚æŠ€æœ¯ã€‚

* **ä¼ ç»ŸAIï¼ˆæ— Serenaï¼‰ï¼š** â€œå¸®æˆ‘æ‰¾åˆ°æ‰€æœ‰è°ƒç”¨ `process_data` çš„åœ°æ–¹ã€‚â€
  * AIè¡Œä¸ºï¼šåœ¨é¡¹ç›®æ–‡ä»¶ä¸­è¿›è¡Œå…¨å±€æ–‡æœ¬æœç´¢â€œ`process_data`â€ï¼Œç»“æœå¯èƒ½åŒ…å«å˜é‡åã€æ³¨é‡Šã€å­—ç¬¦ä¸²ï¼Œç²¾å‡†åº¦ä½ï¼Œä¸”æ— æ³•åŒºåˆ†å®šä¹‰å’Œå¼•ç”¨ã€‚
* **æ™ºèƒ½AIï¼ˆæ­è½½Serenaï¼‰ï¼š** â€œå¸®æˆ‘æ‰¾åˆ°æ‰€æœ‰è°ƒç”¨ `process_data` çš„åœ°æ–¹ã€‚â€
  * AIè¡Œä¸ºï¼šè°ƒç”¨Serenaçš„ `find_referencing_symbols` å·¥å…·ã€‚Serenaé€šè¿‡LSPå‘è¯­è¨€æœåŠ¡å™¨æŸ¥è¯¢ï¼Œ**æ¯«ç§’çº§è¿”å›**æ‰€æœ‰ç²¾ç¡®è°ƒç”¨è¯¥å‡½æ•°çš„ä½ç½®åˆ—è¡¨ï¼Œç»æ— é—æ¼æˆ–è¯¯åˆ¤ã€‚

**è¿™å°±å¥½æ¯”ä»ä½¿ç”¨â€œCtrl+Fâ€çš„åŸå§‹äººï¼Œè¿›åŒ–æˆäº†ä½¿ç”¨â€œIDEæ™ºèƒ½å¯¼èˆªâ€çš„ç°ä»£å¼€å‘è€…ï¼Œæ˜¯çœŸæ­£çš„é™ç»´æ‰“å‡»ã€‚**

## **2ã€æ ©æ ©å¦‚ç”Ÿçš„èƒ½åŠ›å±•ç¤ºï¼šä½ çš„AIèƒ½åšä»€ä¹ˆï¼Ÿ**

æ­è½½Serenaåï¼Œä½ çš„AIåŠ©æ‰‹ä¸å†åªæ˜¯ä¸€ä¸ªèŠå¤©ä¼™ä¼´ï¼Œè€Œæ˜¯èƒ½ç›´æ¥åœ¨ä½ çš„é¡¹ç›®é‡Œâ€œå¹²æ´»â€çš„å…¨èƒ½ä»£ç†ã€‚

1. **ğŸ§­ IDEçº§æ™ºèƒ½å¯¼èˆª**
    * **åœºæ™¯ï¼š** æ¥æ‰‹ä¸€ä¸ªåºå¤§çš„å¼€æºé¡¹ç›®ï¼Œæƒ³ç†æ¸…ä¸€ä¸ªæ ¸å¿ƒå‡½æ•°çš„æ¥é¾™å»è„‰ã€‚
    * **AIæŒ‡ä»¤ï¼š** â€œåˆ†æ `src/core/engine.py` ä¸­ `start()` å‡½æ•°çš„æ‰€æœ‰å¼•ç”¨å…³ç³»ã€‚â€
    * **Serenaèµ‹èƒ½ï¼š** AIä¼šåˆ©ç”¨Serenaçš„å·¥å…·ï¼Œä¸ºä½ ç”Ÿæˆä¸€å¼ æ¸…æ™°çš„å‡½æ•°è°ƒç”¨å…³ç³»å›¾ï¼Œè®©ä½ ç¬é—´ç†è§£ä»£ç æ‰§è¡Œæµç¨‹ã€‚

2. **âœï¸ æ‰‹æœ¯åˆ€å¼ç²¾å‡†ç¼–è¾‘**
    * **åœºæ™¯ï¼š** éœ€è¦åœ¨ä¸€ä¸ªå¤æ‚çš„ç±»ä¸­æ·»åŠ ä¸€ä¸ªæ–°æ–¹æ³•ã€‚
    * **AIæŒ‡ä»¤ï¼š** â€œåœ¨ `UserService` ç±»ä¸­ã€`get_user` æ–¹æ³•ä¹‹åï¼Œæ’å…¥ä¸€ä¸ªåä¸º `reset_password` çš„æ–¹æ³•ã€‚â€
    * **Serenaèµ‹èƒ½ï¼š** AIä¸æ˜¯é‡å†™æ•´ä¸ªæ–‡ä»¶ï¼Œè€Œæ˜¯åƒèµ„æ·±å¼€å‘è€…ä½¿ç”¨IDEä¸€æ ·ï¼Œåœ¨ç¬¦å·çº§åˆ«è¿›è¡Œ**ç²¾å‡†æ’å…¥**ï¼Œä»£ç æ ¼å¼å®Œç¾ï¼Œç»ä¸ä¼šç ´åç°æœ‰ç»“æ„ã€‚

3. **ğŸš€ å…¨è‡ªåŠ¨å¼€å‘å·¥ä½œæµ**
    * **åœºæ™¯ï¼š** â€œæˆ‘éœ€è¦ä¸ºé¡¹ç›®æ·»åŠ ç”¨æˆ·è®¤è¯åŠŸèƒ½ï¼ŒåŒ…æ‹¬ç™»å½•ã€æ³¨å†Œå’Œå¯†ç é‡ç½®ã€‚â€
    * **Serenaèµ‹èƒ½ï¼š** ä½ å¯ä»¥è¦æ±‚AI**åˆ¶å®šåˆ†æ­¥è®¡åˆ’**ï¼Œç„¶åå®ƒè‡ªå·±ä¼šï¼š
        * åˆ†æç°æœ‰ä»£ç ç»“æ„ï¼Œæ‰¾åˆ°åˆé€‚çš„åˆ‡å…¥ç‚¹å’Œéœ€è¦ä¿®æ”¹çš„æ–‡ä»¶ã€‚
        * ç¼–å†™æ–°çš„ä»£ç æ–‡ä»¶ï¼ˆå¦‚ `auth.py`ï¼‰ã€‚
        * åœ¨ç°æœ‰ä»£ç ä¸­æ’å…¥è·¯ç”±æ³¨å†Œã€å¯¼å…¥è¯­å¥ã€‚
        * **è¿è¡Œæµ‹è¯•**ï¼Œæ£€æŸ¥æ–°åŠŸèƒ½æ˜¯å¦æ­£å¸¸ï¼Œæ˜¯å¦ç ´åäº†æ—§åŠŸèƒ½ã€‚
        * æœ€åï¼Œæ‰§è¡Œ `git add` å’Œ `git commit` æäº¤æ›´æ”¹ã€‚
    * **ç»“æœï¼š** ä½ æå‡ºéœ€æ±‚ï¼ŒAIæ‰“å·¥ã€‚ä½ åªéœ€è¦åœ¨å…³é”®èŠ‚ç‚¹ç¡®è®¤ï¼Œæ•ˆç‡æå‡åå€ä¸æ­¢ã€‚

## **3ã€æ— ç¼é›†æˆï¼šå¦‚ä½•å°†è¿™è‚¡â€œç¥åŠ›â€æ³¨å…¥ä½ çš„å·¥ä½œæµï¼Ÿ**

Serenaçš„å¦ä¸€ä¸ªå¼ºå¤§ä¹‹å¤„åœ¨äºå…¶**æ¨¡å‹æ— å…³æ€§å’Œå¹³å°æ— å…³æ€§**ï¼Œé€šè¿‡ **æ¨¡å‹ä¸Šä¸‹æ–‡åè®®ï¼ˆMCPï¼‰** å®ç°æ— ç¼é›†æˆã€‚

| ä½ çš„ä¸»åŠ›å·¥å…· | å¦‚ä½•æ¥å…¥Serenaï¼ˆç”ŸåŠ¨æ¯”å–»ï¼‰ | ä½“éªŒæå‡ |
| :--- | :--- | :--- |
| **Claude Code / Claude Desktop** | åœ¨é…ç½®æ–‡ä»¶ä¸­æ·»åŠ å‡ è¡Œä»£ç ï¼Œå°±åƒç»™Claudeå®‰è£…äº†ä¸€ä¸ªâ€œä¸“ä¸šç¼–ç¨‹æ’ä»¶â€ã€‚ | è®©æœ¬å°±å¼ºå¤§çš„Claudeå¦‚è™æ·»ç¿¼ï¼Œæˆæœ¬æ›´ä½ã€æ•ˆæœæ›´å¥½ã€‚ |
| **Cursor / Windsurf / VSCode** | ä½œä¸ºMCPæœåŠ¡å™¨æ¥å…¥ï¼Œç›¸å½“äºä¸ºä½ å–œæ¬¢çš„IDEé…äº†ä¸€ä¸ªâ€œå†…ç½®çš„AIæ¶æ„å¸ˆâ€ã€‚ | è¡¥é½äº†è¿™äº›å·¥å…·åœ¨å¤§å‹é¡¹ç›®ä»£ç åˆ†æä¸Šçš„çŸ­æ¿ï¼Œå®ç°æ™ºèƒ½é‡æ„ã€‚ |
| **æœ¬åœ°æ¨¡å‹ï¼ˆå¦‚Qwen, Gemini CLIï¼‰** | é€šè¿‡Agnoç­‰æ¡†æ¶é›†æˆï¼Œç›¸å½“äºç»™å…è´¹çš„â€œæœ¬åœ°AIå¤§è„‘â€è¿æ¥äº†ä¸€ä¸ªâ€œIDEè§†è§‰çš®å±‚â€ã€‚ | è®©æœ¬åœ°æ¨¡å‹å…·å¤‡å¤„ç†å¤æ‚é¡¹ç›®çš„èƒ½åŠ›ï¼Œæ€§ä»·æ¯”æé«˜ã€‚ |
| **ChatGPT** | é€šè¿‡ `mcpo` å·¥å…·æ¡¥æ¥ï¼Œè®©ChatGPTä¹Ÿèƒ½â€œçœ‹åˆ°â€å¹¶æ“ä½œä½ çš„ä»£ç åº“ã€‚ | æ‰©å±•äº†ChatGPTçš„ç¼–ç¨‹èƒ½åŠ›è¾¹ç•Œã€‚ |

**ä¸€å¥è¯æ€»ç»“ï¼šä½ å‡ ä¹å¯ä»¥åœ¨ä»»ä½•ä½ å–œæ¬¢çš„ç¼–ç¨‹ç¯å¢ƒä¸­ï¼Œä¸ºä½ é€‰æ‹©çš„ä»»ä½•AIæ¨¡å‹ï¼Œèµ‹äºˆSerenaçš„è¶…èƒ½åŠ›ã€‚**

## **4ã€æœ€ä½³å®è·µä¸é«˜é˜¶ç©æ³•ï¼šåƒç‹ç‰ŒæŒ‡æŒ¥å®˜ä¸€æ ·è°ƒåº¦AI**

* **é¡¹ç›®è®°å¿†ï¼š** Serenaå¯ä»¥ä¸ºæ¯ä¸ªé¡¹ç›®åˆ›å»ºâ€œè®°å¿†æ–‡ä»¶â€ï¼ˆå¦‚`é¡¹ç›®æ¶æ„.md`ã€`æ•°æ®åº“è®¾è®¡.md`ï¼‰ã€‚æ–°å¯¹è¯å¼€å§‹æ—¶ï¼ŒAIå…ˆè¯»å–è®°å¿†ï¼Œç¬é—´è¿›å…¥ä¸Šä¸‹æ–‡ï¼Œæ— éœ€é‡å¤åˆ†æã€‚
* **å¤æ‚ä»»åŠ¡åˆ†è§£ï¼š**
  * **æŒ‡ä»¤ï¼š** â€œæˆ‘ä»¬æ¥ä¸‹æ¥è¦é‡æ„æ”¯ä»˜æ¨¡å—ã€‚è¯·å…ˆåˆ¶å®šä¸€ä¸ªè¯¦ç»†è®¡åˆ’ï¼Œå¹¶ä¿å­˜ä¸ºè®°å¿†ã€‚â€
  * **æŒ‡ä»¤ï¼š** â€œç°åœ¨æ‰§è¡Œç¬¬ä¸€æ­¥ï¼šåˆ†æç°æœ‰æ”¯ä»˜æµç¨‹çš„ä¾èµ–å…³ç³»ã€‚â€
  * **æŒ‡ä»¤ï¼š** â€œæ¯å®Œæˆä¸€ä¸ªæ­¥éª¤ï¼Œè¯·è¿è¡Œç›¸å…³æµ‹è¯•ï¼Œç¡®ä¿æ— è¯¯ã€‚â€
* **å®‰å…¨ç½‘ï¼š**
  * **æŒ‡ä»¤ï¼š** â€œåœ¨å¼€å§‹ä¿®æ”¹å‰ï¼Œè¯·å…ˆæ£€æŸ¥gitçŠ¶æ€ã€‚â€
  * **æŒ‡ä»¤ï¼š** â€œå¦‚æœä¿®æ”¹å‡ºé”™ï¼Œè¯·ä½¿ç”¨gitæ¢å¤æ–‡ä»¶ã€‚â€

## **5ã€ä¸ºä»€ä¹ˆSerenaæ˜¯æ¸¸æˆè§„åˆ™æ”¹å˜è€…ï¼Ÿ**

| ç‰¹æ€§ | ä¼ ç»ŸAIç¼–ç¨‹å·¥å…· | **Serena MCP** |
| :--- | :--- | :--- |
| **ä»£ç ç†è§£** | æ–‡æœ¬çº§åˆ«ï¼Œæ¨¡ç³Š | **ç¬¦å·çº§åˆ«ï¼Œç²¾å‡†** |
| **é¡¹ç›®è§„æ¨¡** | é€‚åˆå°æ–‡ä»¶ã€ç‰‡æ®µ | **æ“…é•¿å¤§å‹ã€å¤æ‚é¡¹ç›®** |
| **é›†æˆæ–¹å¼** | é€šå¸¸ç»‘å®šç‰¹å®šå¹³å°/æ¨¡å‹ | **è‡ªç”±ã€å¼€æºã€å¯æ’æ‹”** |
| **æˆæœ¬** | å¾€å¾€éœ€è¦è®¢é˜…æˆ–æ”¯ä»˜APIè´¹ç”¨ | **å…è´¹ï¼å¢å¼ºä½ å·²æœ‰çš„æ¨¡å‹** |

## Serenaä¸»è¦ä¼˜ç‚¹å¦‚ä¸‹

1. **å¤šåŠŸèƒ½æ€§ä¸å¹³å°å…¼å®¹æ€§ï¼š**  
   * å¯ä¸å¤šç§ LLMSï¼ˆå¦‚ Claude Codeã€Codexã€ChatGPT ç­‰ï¼‰é›†æˆï¼Œå¹¶æ”¯æŒå¤šç§å®¢æˆ·ç«¯å·¥å…·å’Œé›†æˆå¼€å‘ç¯å¢ƒï¼ˆå¦‚ VSCodeã€Cursorã€IntelliJ ç­‰ï¼‰ã€‚  
   * æ”¯æŒå¤šç§ç¼–ç¨‹è¯­è¨€ï¼ŒåŒ…æ‹¬ Pythonã€TypeScriptã€PHPã€Javaã€C/C++ã€Rustã€Goã€Rubyã€Perlã€Dartã€Bashç­‰**25ç§è¯­è¨€**ï¼Œå¹¶å¯é€šè¿‡è¯­è¨€æœåŠ¡å™¨åè®®ï¼ˆLSPï¼‰è½»æ¾æ‰©å±•æ”¯æŒçš„è¯­è¨€ã€‚  

2. **é«˜æ•ˆæ™ºèƒ½ä»£ç æ“ä½œï¼š**  
   * æä¾›å·¥å…·å¦‚ `find_symbol`ã€`insert_after_symbol` å’Œ `replace_symbol_body`ï¼Œå®ç°ç±»ä¼¼IDEçš„é«˜çº§ä»£ç å¯¼èˆªå’Œç¼–è¾‘åŠŸèƒ½ã€‚  
   * é€šè¿‡**ç¬¦å·å±‚çº§**è€Œéé€è¡Œçš„æ–¹å¼ç†è§£ä»£ç ï¼Œå°¤å…¶é€‚ç”¨äºå¤§çš„ã€ç»“æ„å¤æ‚çš„ä»£ç åº“ã€‚

3. **çµæ´»éƒ¨ç½²ä¸æ“ä½œæ¨¡å¼ï¼š**  
   * å¯æœ¬åœ°å®‰è£…ã€é€šè¿‡ Docker æˆ– Nix è¿è¡Œï¼Œä¹Ÿå¯ä»¥é€šè¿‡å¤šç§æ–¹å¼ä½œä¸º MCP æœåŠ¡å™¨ä½¿ç”¨ã€‚æ”¯æŒå¤šç§è¿è¡Œæ¨¡å¼ï¼ˆä¾‹å¦‚ Streamable HTTP æ¨¡å¼ï¼‰ã€‚  
   * æä¾›ä¸Šä¸‹æ–‡ä¸æ¨¡å¼è‡ªå®šä¹‰ï¼Œæ»¡è¶³ä¸åŒé›†æˆä¸å·¥ä½œæµéœ€æ±‚ã€‚

4. **ç¤¾åŒºé©±åŠ¨ä¸å¼€æºï¼š**  
   * å®Œå…¨å…è´¹ï¼Œæ— éœ€è®¢é˜…æˆ– API å¯†é’¥ï¼Œä¹Ÿæ²¡æœ‰ API è°ƒç”¨è´¹ç”¨ã€‚  
   * å¯æ‰©å±•æ€§å¼ºï¼Œæ”¯æŒå·¥å…·å’ŒåŠŸèƒ½ä¸ªæ€§åŒ–å¼€å‘ï¼Œå·²å¹¿æ³›è·å¾—ç¤¾åŒºè´¡çŒ®æ”¯æŒã€‚

5. **å¿«é€Ÿä¸Šæ‰‹ä¸ä½¿ç”¨ä½“éªŒï¼š**  
   * æä¾›è¯¦ç»†çš„æ–‡æ¡£ï¼ŒåŒ…æ‹¬ä»é¡¹ç›®æ¿€æ´»ã€ç´¢å¼•åˆ°å†…å­˜ä¿å­˜çš„å®Œæ•´å·¥ä½œæµç¨‹ã€‚  
   * æä¾›ç”¨äºç®¡ç†æ—¥å¿—ä¸å·¥å…·çš„ç›´è§‚ä»ªè¡¨ç›˜ï¼ŒåŒæ—¶æ”¯æŒå¤šç”¨æˆ·è®¾è®¡ä¼˜åŒ–ã€‚

Serena è‡´åŠ›äºæå‡LLMé©±åŠ¨çš„ä»£ç åŠ©æ‰‹çš„æ•ˆç‡å’ŒåŠŸèƒ½ï¼Œå°¤å…¶é€‚åˆå¤„ç†å¤æ‚é¡¹ç›®ï¼Œä½†å¯¹äºå°å‹é¡¹ç›®æˆ–ä»å¤´å¼€å§‹çš„ç¼–ç ä»»åŠ¡ï¼Œæ•ˆæœå¯èƒ½è¾ƒå¼±ã€‚å¦‚æœéœ€è¦æ›´é«˜ç”Ÿäº§åŠ›æˆ–æ‰©å±• LLM èƒ½åŠ›ï¼ŒSerena æ˜¯ä¸€ä¸ªç†æƒ³é€‰æ‹©ã€‚

å¦å¤–ï¼š

* SuperClaudeå†…ç½®Serenaï¼Œæ‰€ä»¥å¦‚æœä½ ä½¿ç”¨SuperClaudeè¯ï¼Œå°±ä¸ç”¨å•ç‹¬ä½¿ç”¨Serenaäº†ã€‚
* Serenaä¼šåœ¨é¡¹ç›®æ ¹ç›®å½•ä¸‹åˆ›å»º".serena"ç›®å½•ï¼Œè¿˜ä¼šåœ¨â€œ.serena/memoriesâ€ä¸­åˆ›å»ºä¸€äº› md æ–‡ä»¶æ¥ç†è§£é¡¹ç›®ï¼Œå¹¶åˆ©ç”¨å®ƒä»¬æ›´é«˜æ•ˆåœ°å¤„ç†æµç¨‹ã€‚ä¹‹åï¼Œ- Serena ä¼šä½¿ç”¨è‡ªå·±çš„å·¥å…·ï¼Œä¸æ˜¯è¯»å–å…¨éƒ¨ä»£ç ï¼Œè€Œæ˜¯åªè¯»å–å¿…è¦çš„ä»£ç ã€‚Cursor å·²ç»æœ‰ç´¢å¼•ç³»ç»Ÿäº†ï¼Œä½† Claude Code æ²¡æœ‰ï¼Œæ‰€ä»¥ä½¿ç”¨ Serena ä¼šæå¤§æå‡ä½ çš„ Claude Code æ•ˆç‡ã€‚

## å¦‚ä½•åŠ©åŠ›Coding Agentçš„Context Engineeringï¼Ÿ

Claude Codeä¹‹ç±»çš„Coding assistantæœ¬èº«å·²æ”¯æŒæœ¬åœ°ä¸Šä¸‹æ–‡ã€ä»£ç å¯¼èˆªå’Œä¸€äº›å·¥å…·è°ƒç”¨ï¼Œä½†è¦æŠŠâ€œä¸Šä¸‹æ–‡å·¥ç¨‹â€åšæˆä½“ç³»åŒ–ã€å¯ç¼–æ’ã€å¯å¤ç°çš„å·¥ç¨‹èƒ½åŠ›ï¼ŒSerena é€šè¿‡ MCP èƒ½åœ¨å››ä¸ªå±‚é¢æ˜¾è‘—æ”¾å¤§ coding agent çš„æ•ˆæœï¼š**ä¸Šä¸‹æ–‡é€‰æ‹©ã€ä¸Šä¸‹æ–‡ç»“æ„åŒ–ã€ä¸Šä¸‹æ–‡è¡ŒåŠ¨åŒ–ã€ä¸Šä¸‹æ–‡è®°å¿†åŒ–**ã€‚
æˆ‘çœ‹åˆ°æœ‰äººè¯´ï¼Œserenaèƒ½å¸®èŠ‚çœå¤šè¾¾çº¦**70%**çš„tokenï¼ä»¥æˆ‘çš„ç»éªŒæ¥çœ‹ï¼Œserenaç¡®å®èƒ½èŠ‚çœtokenã€‚

**1ã€ä¸Šä¸‹æ–‡é€‰æ‹©ï¼šæŠŠâ€œæ‰¾åˆ°å¯¹çš„ç‰‡æ®µâ€å˜æˆç¡®å®šæ€§æµç¨‹**

* ç¬¦å·çº§å¬å›è€Œéæ–‡ä»¶çº§ç²—æ£€ï¼š
  * ä½¿ç”¨ find_symbolã€find_referencing_symbolsã€get_symbols_overview ç­‰å·¥å…·ï¼ŒClaude å¯ç²¾ç¡®å®šä½å‡½æ•°/ç±»/æ¥å£åŠå…¶å¼•ç”¨é—­åŒ…ï¼Œé¿å…æŠŠæ•´æ–‡ä»¶å¡è¿›ä¸Šä¸‹æ–‡ã€‚
* è¯­ä¹‰å›é€€æœºåˆ¶ï¼š
  * å½“ LSP æ— æ³•æä¾›ç›´æ¥å…³ç³»ï¼ˆå¦‚è·¨è¯­è¨€è°ƒç”¨ã€åå°„/åŠ¨æ€æ³¨å†Œï¼‰ï¼ŒSerena çš„è¯­ä¹‰è®°å¿†å±‚å¯æŒ‰ embedding ç›¸ä¼¼åº¦è¡¥é½å€™é€‰ä¸Šä¸‹æ–‡ã€‚
* Token ç»æµæ€§ï¼š
  * ä»…æŠŠâ€œç›®æ ‡ç¬¦å· + æœ€å°ä¾èµ–é—­åŒ… + ç›¸å…³è°ƒç”¨ç‚¹â€æ³¨å…¥ Claude çš„æç¤ºï¼Œè€Œä¸æ˜¯æ•´æ–‡ä»¶/æ•´æ¨¡å—ï¼Œé™ä½å™ªå£°å’Œæˆæœ¬ã€‚

**2ã€ä¸Šä¸‹æ–‡ç»“æ„åŒ–ï¼šå°†â€œæ— åºç‰‡æ®µâ€å˜æˆâ€œå¯æ¨ç†çš„å›¾è°±â€**

* ç»Ÿä¸€ä¸Šä¸‹æ–‡æ‰“åŒ…åè®®ï¼š
  * MCP å±‚å°†æ£€ç´¢ç»“æœä»¥ç»“æ„åŒ–å•å…ƒè¿”å›ï¼ˆsymbol kindã€locationã€signatureã€docstringã€incoming/outgoing edgesï¼‰ï¼Œè€Œä¸æ˜¯åŸå§‹æ–‡æœ¬æ‹¼æ¥ã€‚
* å…³ç³»æ˜¾å¼åŒ–ï¼š
  * åœ¨æç¤ºä¸­ç”¨å…³ç³»æ¸…å•ç»„ç»‡ä¸Šä¸‹æ–‡ï¼Œå¦‚â€œæ­¤å‡½æ•°è¢« X è°ƒç”¨ï¼Œè°ƒç”¨äº† Y/Zï¼Œçº¦æŸæ¡ä»¶ä¸º A/Bâ€ï¼Œè®© Claude çš„é“¾å¼æ¨ç†è·¯å¾„æ›´çŸ­ã€æ›´ç¨³ã€‚
* è®¾è®¡æ„å›¾ä¸å†³ç­–å†å²å¹¶åˆ—å‘ˆç°ï¼š
  * é€šè¿‡å†…å­˜ç³»ç»Ÿï¼Œå°†è¯¥ç¬¦å·çš„å†å² PR è®¨è®ºã€è®¾è®¡æ–‡æ¡£æ‘˜è¦ã€çº¦æŸè­¦ç¤ºä¸€å¹¶çº³å…¥ä¸Šä¸‹æ–‡ï¼Œä½¿ Claude é¿å…â€œä¸å†å²å†³ç­–å†²çªâ€çš„å»ºè®®ã€‚

**3ã€ä¸Šä¸‹æ–‡è¡ŒåŠ¨åŒ–ï¼šè®©â€œçœ‹æ‡‚ä¸Šä¸‹æ–‡â€ç›´æ¥å˜æˆâ€œå¯æ‰§è¡Œç¼–è¾‘â€**

* å¯ç¼–æ’çš„ç¬¦å·çº§ç¼–è¾‘åŸè¯­ï¼š
  * insert_after_symbolã€insert_before_symbolã€replace_symbol_body ç­‰ï¼Œè®© Claude åœ¨æ‹¿åˆ°ä¸Šä¸‹æ–‡åèƒ½ç”Ÿæˆ WorkspaceEdit çº§åˆ«çš„â€œè¡ŒåŠ¨è®¡åˆ’â€ï¼Œé¿å…è„†å¼±çš„å­—ç¬¦ä¸²æ›¿æ¢ã€‚
* å½±å“é¢é¢„ä¼°ä¸éªŒè¯å›è·¯ï¼š
  * å…ˆç”¨ find_referencing_symbols åˆ—å‡ºå—å½±å“ç‚¹ï¼ŒClaude ç”Ÿæˆå˜æ›´è®¡åˆ’ï¼›åº”ç”¨åå†äºŒæ¬¡æ‰«æéªŒè¯æ˜¯å¦æœ‰æ¼æ”¹ï¼Œå½¢æˆâ€œé—­ç¯ä¸Šä¸‹æ–‡å·¥ç¨‹â€ã€‚
* å¤šæ­¥å·¥ä½œæµå°è£…ï¼š
  * MCP å·¥å…·å¯è¢« Claude ä½œä¸ºå­æ­¥éª¤è°ƒç”¨ï¼šæ£€ç´¢â†’è®¡åˆ’â†’ç¼–è¾‘â†’ç¼–è¯‘/æµ‹è¯•è§¦å‘â†’å›æº¯ä¿®æ­£ï¼Œä¿è¯é•¿é“¾æ¡ä»»åŠ¡çš„ç¨³å®šæ€§å’Œå¯å¤ç”¨æ€§ã€‚

**4ã€ä¸Šä¸‹æ–‡è®°å¿†åŒ–ï¼šæŠŠä¸€æ¬¡æ€§çš„ä¸Šä¸‹æ–‡å˜æˆå›¢é˜Ÿçš„â€œæŒä¹…çŸ¥è¯†â€**

* é¡¹ç›®çº§ memoryï¼š
  * å°†â€œä¸ºä½•è¿™æ ·æ”¹â€çš„ rationaleã€è¸©å‘è®°å½•ã€è¾¹ç•Œæ¡ä»¶ä½œä¸ºæ¡ç›®å†™å›è®°å¿†å±‚ï¼Œåç»­ç›¸ä¼¼ä»»åŠ¡è‡ªåŠ¨è¢«å¬å›åˆ° Claude çš„ä¸Šä¸‹æ–‡é‡Œã€‚
* è¯­ä¹‰ç´¢å¼•è”åŠ¨ï¼š
  * æ¯æ¬¡æˆåŠŸå˜æ›´ï¼Œæç‚¼â€œæ¨¡å¼åŒ–ç­–ç•¥â€ï¼ˆå¦‚é‡å‘½å API çš„æ ‡å‡†æ­¥éª¤ï¼‰ï¼Œä¸‹æ¬¡ Claude ç›´æ¥å¤ç”¨ç­–ç•¥æ¨¡æ¿ï¼Œå‡å°‘æ¨ç†æ¼‚ç§»ã€‚
* å®¢æˆ·ç«¯æ— å…³æ€§ï¼š
  * è¿™äº›è®°å¿†ä¸å·¥å…·å­˜åœ¨ MCP ä¾§ï¼Œä¸ç»‘æ­»åœ¨æŸä¸ª IDEã€‚å³ä½¿ä» Claude Code åˆ‡åˆ° Roo Code/CLI/CI Botï¼Œä¹Ÿèƒ½å¤ç”¨ç›¸åŒä¸Šä¸‹æ–‡å·¥ç¨‹èµ„äº§ã€‚

## å®è·µè½åœ°æ–¹æ¡ˆï¼ˆé¢å‘ Claude Code çš„æœ€å°å¯è¡Œé›†ï¼‰

* æç¤ºæ¨¡ç‰ˆè¦ç‚¹
  * å…ˆå–ç¬¦å·æ¦‚è§ˆâ†’è¡¥é½å¼•ç”¨é—­åŒ…â†’æ³¨å…¥è®¾è®¡æ„å›¾ä¸å†å²é™åˆ¶â†’è®© Claude è¾“å‡ºâ€œç¼–è¾‘è®¡åˆ’ JSONâ€ï¼ˆå«å—å½±å“æ–‡ä»¶ã€å˜æ›´ç‚¹ã€éªŒè¯æ­¥éª¤ï¼‰â†’å†è°ƒç”¨ç¼–è¾‘åŸè¯­ã€‚
* è´¨é‡æ§åˆ¶
  * å˜æ›´å‰åè‡ªåŠ¨ç”Ÿæˆå½±å“æ¸…å• diffï¼Œè¦æ±‚ Claude å¯¹æ¯ä¸ªå·®å¼‚ç‚¹ç»™å‡ºâ€œåŸå› è§£é‡Šä¸éªŒè¯æ–­è¨€â€ï¼Œé¿å…â€œçœ‹èµ·æ¥æ”¹å¯¹äº†ä½†è¯­ä¹‰æ¼‚ç§»â€ã€‚
* Token ç®¡æ§
  * çº¦å®šæ¯è½®è°ƒç”¨çš„ä¸Šä¸‹æ–‡é¢„ç®—ï¼šç¬¦å·æ–‡æ‘˜ + å¿…è¦ç‰‡æ®µ + å…³é”®å¼•ç”¨ç‚¹çš„æœ€å°ç‰‡æ®µï¼›å¯¹å¤§å‡½æ•°åªæ³¨å…¥ç­¾åä¸å…³é”®ç‰‡æ®µé”šç‚¹ï¼Œå…¨æ–‡æŒ‰éœ€æ‹‰å–ã€‚

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…

**cursor/copilot**

```json
{
  "mcpServers": {
    "serena": {
      "command": "uvx",
      "args": [
        "--from",
        "git+https://github.com/oraios/serena",
        "serena-mcp-server"
      ]
    }
}

```

**Claude Code**

```bash
claude mcp add serena -- uvx --from git+https://github.com/oraios/serena serena start-mcp-server --context ide-assistant --project $(pwd)
```

### 2. Onboarding

é¦–æ¬¡ä½¿ç”¨ Serena æ—¶ï¼Œæ‚¨éœ€è¦è¿è¡Œ **â€œSerena Onboarding"** ã€‚å¼•å¯¼æµç¨‹æ˜¯Serenaè¯»å–å¹¶ç†è§£é¡¹ç›®å¹¶ä¸ºæ‚¨çš„ç¼–ç åšå‡†å¤‡çš„è¿‡ç¨‹ã€‚å¼•å¯¼æµç¨‹ä¼šåœ¨**serena\memories**  æ–‡ä»¶å¤¹ä¸­ç”Ÿæˆ  **memories (md files)** ã€‚æ­¤å¼•å¯¼æµç¨‹ä¼šè¯»å–è®¸å¤šæ–‡ä»¶å¹¶æ¶ˆè€—å¤§é‡ä»£å¸ï¼Œæ‰€ä»¥è¯·æ³¨æ„ä¸è¦è€—å°½ä»£å¸ã€‚è¦è¿è¡Œå¼•å¯¼æµç¨‹ï¼Œæ‚¨éœ€è¦è®©æ‚¨çš„ Claude Codeï¼ˆæˆ–å…¶ä»–å·¥å…·ï¼‰åœ¨èŠå¤©ä¸­å¯åŠ¨ Serena å¼•å¯¼æµç¨‹ã€‚å¦å¤–ï¼Œåœ¨æˆ‘çš„æƒ…å†µä¸‹ï¼Œéƒ¨åˆ†è®°å¿†å¹¶ä¸å‡†ç¡®ï¼Œæˆ‘éœ€è¦è¿›è¡Œä¿®æ­£ã€‚

### 3. Indexing

åœ¨åˆå§‹åŒ–è¿‡ç¨‹ä¸­è¿˜ç”Ÿæˆäº†ä¸€ä¸ªç¼“å­˜æ–‡ä»¶  .serena\cache\typescript\document_symbols_cache_v23-06-25.pkl ã€‚å½“æˆ‘ç”¨å…‰æ ‡ç¼–è¾‘å™¨æ‰“å¼€ç¼“å­˜æ–‡ä»¶æ—¶ï¼Œå†…å®¹æ˜¯ä¹±ç ï¼Œä½†æˆ‘èƒ½çœ‹åˆ°ç´¢å¼•å·²åˆ›å»ºã€‚ä¸è¿‡ï¼Œè¯¥ç´¢å¼•ä¼¼ä¹å¹¶æœªæ¶µç›–æ•´ä¸ªé¡¹ç›®ã€‚å› æ­¤ï¼Œæˆ‘è¿è¡Œäº†ä¸‹é¢çš„å‘½ä»¤ï¼Œä¸ºæ•´ä¸ªé¡¹ç›®åˆ›å»ºäº†ç´¢å¼•ã€‚

```bash
uvx --from git+https://github.com/oraios/serena serena project index
```

## ä½¿ç”¨ç¤ºä¾‹

>åˆ†æè¿™ä¸ªé¡¹ç›®çš„æ‰§è¡Œæµç¨‹

>è¯·è¿è¡Œä»£ç è´¨é‡æ£€æµ‹å·¥å…·ï¼Œæ£€æŸ¥æœ‰å“ªé‡Œéœ€è¦æ”¹è¿›çš„åœ°æ–¹ã€‚

>è¯·ä¸ºè¿™ä¸ªé‡æ„ä»»åŠ¡åˆ›å»ºä¸€ä¸ªè¯¦ç»†çš„è®¡åˆ’ï¼Œå¹¶ä¿å­˜ä¸ºè®°å¿†ã€‚

>æ˜¾ç¤ºæ‰€æœ‰é¡¹ç›®è®°å¿†

>è¯·å®ç°ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ

```bash
æˆ‘éœ€è¦å®ç°ä¸€ä¸ªå®Œæ•´çš„ç”¨æˆ·ç®¡ç†ç³»ç»Ÿ,åŒ…æ‹¬:
1. ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
2. å¯†ç é‡ç½®åŠŸèƒ½
3. ç”¨æˆ·èµ„æ–™ç®¡ç†
4. æƒé™æ§åˆ¶
5. ç›¸åº”çš„æµ‹è¯•
```

## ç»“è®º

Serena MCP ä¸ä»…ä»…æ˜¯ä¸€ä¸ªå·¥å…·ï¼Œå®ƒä»£è¡¨äº†ä¸€ç§èŒƒå¼è½¬ç§»â€”â€”AIä»è¢«åŠ¨çš„â€œè¾…åŠ©è€…â€å˜æˆäº†ä¸»åŠ¨çš„ã€æ‹¥æœ‰â€œè§†è§‰â€å’Œâ€œåŠ¨æ‰‹èƒ½åŠ›â€çš„â€œåˆä½œè€…â€ã€‚å¦‚æœä½ æ­£åœ¨ç»å†AIç¼–ç¨‹å·¥å…·åœ¨å¤æ‚é¡¹ç›®å‰çš„æ— åŠ›æ„Ÿï¼Œé‚£ä¹ˆSerenaå°±æ˜¯ä½ ä¸€ç›´åœ¨ç­‰å¾…çš„ç­”æ¡ˆã€‚
Serena èƒ½å¤Ÿå‡å°‘tokenä½¿ç”¨é‡ã€ç¼©çŸ­å“åº”æ—¶é—´ï¼Œè¿˜èƒ½æå‡ä»£ç è´¨é‡ã€‚ä½¿ç”¨ Serena ç®€å•åˆå…è´¹ï¼Œæ‰€ä»¥ä¸ºä½•ä¸è¯•è¯•çœ‹å‘¢ã€‚

## å‚è€ƒ

* [Serena MCP Server Github](https://github.com/oraios/serena)
* [Serena MCP Server Documentation](https://github.com/oraios/serena/blob/main/docs/)
* [Serena MCP Server Overview in Zread.ai](https://zread.ai/oraios/serena/1-overview)
