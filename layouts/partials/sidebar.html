<aside class="sidebar" aria-label="Site navigation">
    <!-- Section 1: Profile -->
    <div class="sidebar-section sidebar-profile">
        <div class="profile-avatar">
            <img src="{{ site.Params.sidebar.avatar | default "/images/profile.jpg" }}" alt="{{ site.Params.author }}">
        </div>
        <h2 class="profile-name">{{ site.Params.author }}</h2>
        <p class="profile-email">
            <a href="mailto:{{ site.Params.sidebar.email }}">{{ site.Params.sidebar.email }}</a>
        </p>
        <p class="profile-slogan">{{ site.Params.sidebar.slogan | default "Make yesterday better." }}</p>
    </div>

    <!-- Section 1.5: Top Links (Home, About, Search) -->
    <div class="sidebar-section">
        <ul class="sidebar-menu">
            {{- $currentPage := . -}}
            {{- $topMenuURLs := slice "/" "/about" "/search" "/search/" -}}
            {{- range site.Menus.main }}
            {{- if in $topMenuURLs .URL }}
            {{- $menuURL := .URL | relLangURL -}}
            <li>
                <a href="{{ $menuURL }}" class="{{ if or (eq $currentPage.RelPermalink $menuURL) (and (ne $menuURL "/") (hasPrefix $currentPage.RelPermalink $menuURL)) }}active{{ end }}">
                    {{- if .Params.icon }}{{ partial "icon.html" (dict "name" .Params.icon) }} {{ end -}}
                    {{ .Name }}
                </a>
            </li>
            {{- end }}
            {{- end }}
        </ul>
    </div>

    <!-- Section 2: Main Navigation -->
    <div class="sidebar-section">
        <h3 class="sidebar-heading">{{ i18n "navigation" | default "ÂØºËà™" }}</h3>
        <ul class="sidebar-menu">
            {{- $currentPage := . -}}
            {{- $topMenuURLs := slice "/" "/about" "/search" "/search/" -}}
            {{- range site.Menus.main }}
            {{- if not (in $topMenuURLs .URL) }}
            {{- $menuURL := .URL | relLangURL -}}
            <li>
                <a href="{{ $menuURL }}" class="{{ if or (eq $currentPage.RelPermalink $menuURL) (and (ne $menuURL "/") (hasPrefix $currentPage.RelPermalink $menuURL)) }}active{{ end }}">
                    {{- if .Params.icon }}{{ partial "icon.html" (dict "name" .Params.icon) }} {{ end -}}
                    {{ .Name }}
                </a>
            </li>
            {{- end }}
            {{- end }}
        </ul>
    </div>

    <!-- Section 3: Articles (Posts) - Removed to keep consistent with top menu -->
    <!-- 
    <div class="sidebar-section">
        <h3 class="sidebar-heading">{{ i18n "articles" | default "ÊñáÁ´†" }}</h3>
        <ul class="sidebar-menu">
            {{- $mainCategories := slice "my_insights" "celebrity_insights" "ai_spec" "big_companies" "papers" "technologies" "large_models" "training" "context_engineering" "mas" "ai_programming" "ai_tools" "projects" "news" "courses" }}
            {{- $categoryIcons := dict "my_insights" "lightbulb" "celebrity_insights" "star" "ai_spec" "file-text" "big_companies" "briefcase" "papers" "book-open" "technologies" "terminal" "large_models" "brain" "training" "settings" "context_engineering" "message-square" "mas" "users" "ai_programming" "code" "ai_tools" "tool" "projects" "rocket" "news" "globe" "courses" "graduation-cap" }}
            {{- range $catName := $mainCategories }}
            {{- $taxonomy := index site.Taxonomies.categories $catName }}
            {{- if $taxonomy }}
            {{- if gt (len $taxonomy) 0 }}
            {{- $displayName := i18n (printf "cat_%s" $catName) | default (humanize $catName) }}
            <li><a href="{{ printf "categories/%s" $catName | relLangURL }}/">{{ partial "icon.html" (dict "name" (index $categoryIcons $catName)) }} {{ $displayName }}</a></li>
            {{- end }}
            {{- end }}
            {{- end }}
        </ul>
    </div>
    -->

    <!-- Section 4: Projects -->
    <div class="sidebar-section">
        <h3 class="sidebar-heading">{{ i18n "projects" | default "È°πÁõÆ" }}</h3>
        <ul class="sidebar-menu sidebar-projects">
            {{- if site.Params.sidebar.projects }}
            {{- range site.Params.sidebar.projects }}
            <li>
                <a href="{{ .url }}" target="_blank" rel="noopener">
                    <span class="project-name">{{ .name }}</span>
                    {{- if .description }}
                    <span class="project-desc">{{ .description }}</span>
                    {{- end }}
                </a>
            </li>
            {{- end }}
            {{- else }}
            <li><a href="https://github.com/hobbytp" target="_blank">üîó ÊàëÁöÑGitHub</a></li>
            {{- end }}
        </ul>
    </div>

    <!-- Online Status (Optional) -->
    {{- if site.Params.sidebar.showOnlineStatus }}
    <div class="sidebar-section">
        <h3 class="sidebar-heading">Online</h3>
        <div class="online-status">
            <span class="status-indicator"></span>
            <span>Âú®Á∫ø</span>
        </div>
    </div>
    {{- end }}

    <!-- Section: Theme Toggle (bottom) -->
    {{- if (not site.Params.disableThemeToggle) }}
    <div class="sidebar-section sidebar-theme-toggle sidebar-theme-toggle-bottom">
        <button id="sidebar-theme-toggle" class="sidebar-theme-toggle-btn" accesskey="t" title="ÂàáÊç¢‰∏ªÈ¢ò (Alt + T)" aria-label="ÂàáÊç¢‰∏ªÈ¢ò">
            <svg id="sidebar-moon" class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
            </svg>
            <svg id="sidebar-sun" class="theme-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24"
                fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
            </svg>
            <span class="visually-hidden">ÂàáÊç¢‰∏ªÈ¢ò</span>
        </button>
    </div>
    {{- end }}
</aside>

